<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">
    <title>FaceSecure</title>
    <link rel="stylesheet" href="styles.css">
    <script src="https://cdnjs.cloudflare.com/ajax/libs/face-api.js/0.22.2/face-api.min.js"></script>
</head>
<body>
    <div class="auth-container">
        <div class="auth-left">
            <img class="logo" src="https://via.placeholder.com/80" alt="FaceSecure Logo">
            <h1 class="website-title">FaceSecure</h1>
            <p class="website-subtitle">Secure Face Recognition Attendance</p>
            <p class="website-desc">Register or login using your face for seamless attendance tracking.</p>
        </div>
        <div class="auth-right">
            <div class="auth-form">
                <h2 id="auth-title">Register Your Face</h2>
                <div class="video-container">
                    <video id="video" autoplay muted playsinline></video>
                    <canvas id="canvas"></canvas>
                </div>
                <input type="text" id="full-name" placeholder="Enter full name">
                <p id="status" class="status"></p>
                <button id="register-btn" class="btn btn-primary">Register</button>
                <button id="login-btn" class="btn btn-primary">Continue</button>
                <p><span id="toggle-prefix">Already registered? </span><a id="switch-btn" href="#">Login</a></p>
                <button id="clear-data-btn" class="btn btn-danger">Clear Data</button>
            </div>
        </div>
    </div>

    <div id="dashboard" style="display: none;">
        <div class="sidebar-overlay"></div>
        <aside id="sidebar">
            <div class="logo-container">
                <img class="logo" src="https://via.placeholder.com/80" alt="FaceSecure Logo">
                <h1 class="website-title">FaceSecure</h1>
            </div>
            <nav>
                <button class="tab-btn" data-tab="create-room">Create Room</button>
                <button class="tab-btn" data-tab="attend-room">Attend Room</button>
                <button class="tab-btn" data-tab="view-rooms">Opened Rooms</button>
                <button class="tab-btn" data-tab="rooms-history">Rooms History</button>
                <button id="logout-btn" class="btn">Logout</button>
            </nav>
        </aside>
        <main>
            <header>
                <button id="menu-toggle" class="btn">‚ò∞</button>
                <h1 id="current-tab-name">Create Room</h1>
                <span id="current-mode"></span>
                <span id="dropdown-indicator">‚ñº</span>
                <button id="search-btn" style="display: none;"><span class="search-icon">üîç</span></button>
                <input id="search-input" class="search-input" type="text" placeholder="Search rooms..." style="display: none;">
            </header>
            <div id="attendance-mode-dropdown" class="dropdown" style="display: none;">
                <div class="dropdown-item" data-mode="online">
                    <span class="tick" data-mode="online">‚úî</span> Online
                </div>
                <div class="dropdown-item" data-mode="presence">
                    <span class="tick" data-mode="presence">‚úî</span> Presence
                </div>
            </div>
            <section id="create-room" class="tab-content">
                <h2>Create a Room</h2>
                <input type="text" id="room-name" placeholder="Room name">
                <input type="number" id="attendance-cap" placeholder="Attendance cap (optional)">
                <input type="number" id="close-time" placeholder="Auto-close time in minutes (optional)">
                <input type="datetime-local" id="close-deadline" placeholder="Close deadline (optional)">
                <button id="create-room-btn" class="btn btn-primary">Create Room</button>
                <p id="create-room-status"></p>
            </section>
            <section id="attend-room" class="tab-content">
                <div class="online-attendance">
                    <h2>Attend a Room</h2>
                    <input type="text" id="room-code" placeholder="Enter room code">
                    <button id="mark-attendance-btn" class="btn btn-primary">Mark Attendance</button>
                    <p id="attend-room-status"></p>
                </div>
                <div id="presence-camera" style="display: none;">
                    <div class="video-container">
                        <video id="attendance-video" autoplay muted playsinline></video>
                    </div>
                    <p id="recognized-user"></p>
                    <button id="capture-btn" class="btn btn-secondary">Capture</button>
                    <button id="stop-presence-btn" class="btn btn-secondary">Stop Presence Attendance</button>
                </div>
            </section>
            <section id="view-rooms" class="tab-content">
                <h2>Opened Rooms</h2>
                <div id="open-rooms-list"></div>
            </section>
            <section id="rooms-history" class="tab-content">
                <h2>Rooms History</h2>
                <div id="history-rooms-list"></div>
            </section>
            <section id="attendance-screen" class="attendance-screen">
                <h2 id="attendance-room-name"></h2>
                <table id="attendees-list"></table>
                <button id="back-btn" class="btn btn-primary">Back</button>
            </section>
        </main>
    </div>

    <script type="module" src="script.js"></script>
</body>
</html>
